<?xml version="1.0" encoding="UTF-8"?>
        <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tencent.wxcloudrun.dao.MerchantMapper">
    <resultMap type="com.tencent.wxcloudrun.model.Merchant" id="MerchantMap">
        <result property="id" column="id" jdbcType="VARCHAR"/>
        <result property="merchantName" column="merchant_name" jdbcType="VARCHAR"/>
        <result property="merchantType" column="merchant_type" jdbcType="NUMERIC"/>
        <result property="merchantAddress" column="merchant_address" jdbcType="VARCHAR"/>
        <result property="merchantDes" column="merchant_des" jdbcType="VARCHAR"/>
        <result property="merchantPhone" column="merchant_phone" jdbcType="VARCHAR"/>
        <result property="merchantManager" column="merchant_manager" jdbcType="VARCHAR"/>
        <result property="merchantRole" column="merchant_role" jdbcType="NUMERIC"/>
        <result property="merchantPassword" column="merchant_password" jdbcType="VARCHAR"/>
        <result property="merchantAccount" column="merchant_account" jdbcType="VARCHAR"/>
        <result property="loginToken" column="login_token" jdbcType="VARCHAR"/>
    </resultMap>

    <!-- 通过ID查询单条数据 -->
    <select id="queryByAccountAndPassword" resultMap="MerchantMap">
        select
        id,merchant_name,merchant_type,merchant_address,merchant_des,merchant_phone,merchant_manager,merchant_role,merchant_password,merchant_account,login_token
        from merchant
        where merchant_account = #{merchant_account} and merchant_password = #{merchant_password}
    </select>

    <!-- 通过ID查询单条数据 -->
    <select id="queryById" resultMap="MerchantMap">
        select
            id,merchant_name,merchant_type,merchant_address,merchant_des,merchant_phone,merchant_manager,merchant_role,merchant_password,merchant_account,login_token
        from merchant
        where id = #{id}
    </select>

    <!--分页查询指定行数据-->
    <select id="queryAllByLimit" resultMap="MerchantMap">
        select
        id,merchant_name,merchant_type,merchant_address,merchant_des,merchant_phone,merchant_manager,merchant_role,merchant_password,merchant_account,login_token
        from merchant
        <where>
            <if test="id != null and id != ''">
                and id = #{id}
            </if>
            <if test="merchantName != null and merchantName != ''">
                and merchant_name = #{merchantName}
            </if>
            <if test="merchantType != null and merchantType != ''">
                and merchant_type = #{merchantType}
            </if>
            <if test="merchantAddress != null and merchantAddress != ''">
                and merchant_address = #{merchantAddress}
            </if>
            <if test="merchantDes != null and merchantDes != ''">
                and merchant_des = #{merchantDes}
            </if>
            <if test="merchantPhone != null and merchantPhone != ''">
                and merchant_phone = #{merchantPhone}
            </if>
            <if test="merchantManager != null and merchantManager != ''">
                and merchant_manager = #{merchantManager}
            </if>
            <if test="merchantRole != null and merchantRole != ''">
                and merchant_role = #{merchantRole}
            </if>
            <if test="merchantPassword != null and merchantPassword != ''">
                and merchant_password = #{merchantPassword}
            </if>
            <if test="merchantAccount != null and merchantAccount != ''">
                and merchant_account = #{merchantAccount}
            </if>
            <if test="loginToken != null and loginToken != ''">
                and login_token = #{loginToken}
            </if>
        </where>
        limit #{pageable.offset}, #{pageable.pageSize}
    </select>

    <!--统计总行数-->
    <select id="count" resultType="java.lang.Long">
        select count(1)
        from merchant
        <where>
            <if test="id != null and id != ''">
                and id = #{id}
            </if>
            <if test="merchantName != null and merchantName != ''">
                and merchant_name = #{merchantName}
            </if>
            <if test="merchantType != null and merchantType != ''">
                and merchant_type = #{merchantType}
            </if>
            <if test="merchantAddress != null and merchantAddress != ''">
                and merchant_address = #{merchantAddress}
            </if>
            <if test="merchantDes != null and merchantDes != ''">
                and merchant_des = #{merchantDes}
            </if>
            <if test="merchantPhone != null and merchantPhone != ''">
                and merchant_phone = #{merchantPhone}
            </if>
            <if test="merchantManager != null and merchantManager != ''">
                and merchant_manager = #{merchantManager}
            </if>
            <if test="merchantRole != null and merchantRole != ''">
                and merchant_role = #{merchantRole}
            </if>
            <if test="merchantPassword != null and merchantPassword != ''">
                and merchant_password = #{merchantPassword}
            </if>
            <if test="merchantAccount != null and merchantAccount != ''">
                and merchant_account = #{merchantAccount}
            </if>
            <if test="loginToken != null and loginToken != ''">
                and login_token = #{loginToken}
            </if>
        </where>
    </select>

    <!--新增数据-->
    <insert id="insert" keyProperty="id" useGeneratedKeys="true">
        insert into merchant(id,merchant_name,merchant_type,merchant_address,merchant_des,merchant_phone,merchant_manager,merchant_role,merchant_password,merchant_account,login_token)
        values (#{id},#{merchantName},#{merchantType},#{merchantAddress},#{merchantDes},#{merchantPhone},#{merchantManager},#{merchantRole},#{merchantPassword},#{merchantAccount},#{loginToken})
    </insert>

    <!-- 批量新增数据 -->
    <insert id="insertBatch" keyProperty="id" useGeneratedKeys="true">
        insert into merchant(id,merchant_name,merchant_type,merchant_address,merchant_des,merchant_phone,merchant_manager,merchant_role,merchant_password,merchant_account,login_token)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.id},#{entity.merchantName},#{entity.merchantType},#{entity.merchantAddress},#{entity.merchantDes},#{entity.merchantPhone},#{entity.merchantManager},#{entity.merchantRole},#{entity.merchantPassword},#{entity.merchantAccount},#{entity.loginToken})
        </foreach>
    </insert>

    <!-- 批量新增或按主键更新数据 -->
    <insert id="insertOrUpdateBatch" keyProperty="id" useGeneratedKeys="true">
        insert into merchant(id,merchant_name,merchant_type,merchant_address,merchant_des,merchant_phone,merchant_manager,merchant_role,merchant_password,merchant_account,login_token)
        values
        <foreach collection="entities" item="entity" separator=",">
            (#{entity.id},#{entity.merchantName},#{entity.merchantType},#{entity.merchantAddress},#{entity.merchantDes},#{entity.merchantPhone},#{entity.merchantManager},#{entity.merchantRole},#{entity.merchantPassword},#{entity.merchantAccount},#{entity.loginToken})
        </foreach>
        on duplicate key update
        id=values(id),
        merchant_name=values(merchant_name),
        merchant_type=values(merchant_type),
        merchant_address=values(merchant_address),
        merchant_des=values(merchant_des),
        merchant_phone=values(merchant_phone),
        merchant_manager=values(merchant_manager),
        merchant_role=values(merchant_role),
        merchant_password=values(merchant_password),
        merchant_account=values(merchant_account),
        login_token=values(login_token)
    </insert>

    <!-- 更新数据 -->
    <update id="update">
        update merchant
        <set>
            <if test="id != null and id != ''">
                id = #{id},
            </if>
            <if test="merchantName != null and merchantName != ''">
                merchant_name = #{merchantName},
            </if>
            <if test="merchantType != null and merchantType != ''">
                merchant_type = #{merchantType},
            </if>
            <if test="merchantAddress != null and merchantAddress != ''">
                merchant_address = #{merchantAddress},
            </if>
            <if test="merchantDes != null and merchantDes != ''">
                merchant_des = #{merchantDes},
            </if>
            <if test="merchantPhone != null and merchantPhone != ''">
                merchant_phone = #{merchantPhone},
            </if>
            <if test="merchantManager != null and merchantManager != ''">
                merchant_manager = #{merchantManager},
            </if>
            <if test="merchantRole != null and merchantRole != ''">
                merchant_role = #{merchantRole},
            </if>
            <if test="merchantPassword != null and merchantPassword != ''">
                merchant_password = #{merchantPassword},
            </if>
            <if test="merchantAccount != null and merchantAccount != ''">
                merchant_account = #{merchantAccount},
            </if>
            <if test="loginToken != null and loginToken != ''">
                login_token = #{loginToken},
            </if>
        </set>
        where id = #{id}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete from merchant where id = #{id}
    </delete>
</mapper>